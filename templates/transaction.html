{% extends "base.html" %}

{% block title %}Transactions - Budget Tracker{% endblock %}

{% block content %}
<h2>Add a Transaction</h2>
<form method="POST" action="{{ url_for('add_transaction') }}">
    <label>Description:</label><br>
    <input type="text" name="description" required><br><br>

    <label>Amount:</label><br>
    <input type="number" step="0.01" name="amount" required><br><br>

    <label>Category:</label><br>
    <input type="text" name="category" required><br><br>

    <label>Is this income?</label>
    <input type="checkbox" name="is_income"><br><br>
    
    <label>Account:</label><br>
    <select name="account" required>
        <option value="Checking">Checking</option>
        <option value="HYSA">HYSA</option>
        <option value="ROTH">ROTH</option>
    </select><br><br>

    <input type="submit" value="Add Transaction">
</form>

<form method="get" action="{{ url_for('transactions') }}">
    <label for="year">Year:</label>
    <input type="number" id="year" name="year" value="{{ request.args.get('year', '') }}" required>

    <label for="month">Month:</label>
    <input type="number" id="month" name="month" min="1" max="12" value="{{ request.args.get('month', '') }}" required>

    <input type="submit" value="View">
</form>

<h2>All Transactions</h2>
<ul>
    {% for txn in transactions %}
        <li>
            {{ txn.date.strftime('%Y-%m-%d') }} - 
            {{ txn.description }}: 
            ${{ "%.2f"|format(txn.amount) }} 
            ({{ txn.category }} | {{ txn.account }} | 
            <span class="{{ 'income' if txn.is_income else 'expense' }}">
                {% if txn.is_income %}Income{% else %}Expense{% endif %}
            </span>)
        </li>
    {% else %}
        <li>No transactions yet.</li>
    {% endfor %}
</ul>
{% endblock %}